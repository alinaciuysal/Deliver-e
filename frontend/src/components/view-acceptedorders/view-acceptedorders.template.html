<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Accepted orders</title>
</head>
<body>
<div>&nbsp;</div>
<div layout="row" layout-align="center center" layout-margin ng-init="$ctrl.$onInit()">
    <md-content>
        <h2>My Orders</h2>
        <p ng-if="!$ctrl.showTabs" layout="row" layout-align="center center">You have not accepted any orders yet.</p>
        <md-card ng-if="$ctrl.showTabs" style="width: 750px;">
            <md-tabs md-dynamic-height md-border-bottom>
                <md-tab ng-value="order" ng-repeat="order in $ctrl.availableOrders3" label="Order {{$index + 1}}">
                    <md-content class="md-padding">
                        <p>Address:&nbsp;&nbsp;{{order.district}} / {{order.location}}</p>
                        <p>Shop:&nbsp;&nbsp;{{order.shop.name}} - {{order.shop.address}}</p>
                        <p>Weight:&nbsp;&nbsp;{{order.totalWeight}} kg</p>
                        <p>Payment to shop:&nbsp;&nbsp;{{order.totalPrice | number:2}} €</p>
                        <p>Total payment:&nbsp;&nbsp;{{order.totalPrice * 115 / 100 | number:2}} €</p>
                        <p>Profit:&nbsp;&nbsp;{{order.totalPrice * 15 / 100 | number:2}} €</p>
                        <p>Latest Delivery Time:&nbsp;&nbsp;{{order.deliveryTime | date: "HH:mm - dd.MM.y"}}</p>
                        <p>Status:&nbsp;&nbsp;{{order.status}}</p><br>
                        <md-button class="md-raised" layout-align="center center" ng-click="ifVisible = !ifVisible;">&nbsp;See items&nbsp;</md-button>
                    </md-content>
                    <div ng-if="ifVisible" style="width: 750px;">
                        <md-card>
                            <md-content>
                                <md-list flex>
                                    <md-subheader class="md-no-sticky">Items</md-subheader>
                                    <md-divider></md-divider>
                                    <md-list-item ng-model="order.items" ng-repeat="item in order.items" ng-click="null">
                                        <p>Item:&nbsp;&nbsp;{{item.product.name}}</p>
                                        <p>Price:&nbsp;&nbsp;{{item.amount * item.product.price}} €</p>
                                        <p>Amount:&nbsp;&nbsp;{{item.amount}}</p>
                                        <md-divider ng-if='!$last'></md-divider>
                                    </md-list-item>
                                </md-list>
                            </md-content>
                        </md-card>
                    </div>
                    <br>
                    <md-button class="md-raised" layout-align="center center" ng-click="$ctrl.doneOrder(order._id)"><md-icon md-svg-icon="check"></md-icon>&nbsp;Complete Order&nbsp;</md-button>
                </md-tab>
            </md-tabs>
        </md-card>
    </md-content>
</div>
</body>
</html>